!function(){function e(t,o){"open"===o?("closed"===a?t.show():p[p.length]=t,a=o):"closed"===o&&(a=o,p.length>0&&(item=p.shift(),e(item,"open")))}function t(e,t,i){var a,p,n=0,d=window.location,s=document.referrer,r=null,u=function(t){r=jQuery.extend({},e),r.popup=t,o(r)};return"undefined"!=typeof force_popover&&(n=force_popover.toString()),"undefined"!=typeof t&&(n=t.toString()),e.ajax_data=e.ajax_data||{},p=jQuery.extend({},e.ajax_data),p.action="inc_popup",p["do"]=e["do"],p.thefrom=d.toString(),p.thereferrer=s.toString(),n&&(p.po_id=n),i&&(p.data=i),e.preview&&(p.preview=!0),a={url:e.ajaxurl,dataType:"jsonp",jsonpCallback:"po_data",data:p,success:function(e){u(e)},complete:function(){jQuery(document).trigger("popup-load-done",[r])}},jQuery.ajax(a)}function o(e){if(void 0!==e){var t=function(e){void 0!==e&&(void 0!==e.popup&&void 0!==e.popup.html&&(jQuery('<style type="text/css">'+e.popup.styles+"</style>").appendTo("head"),jQuery(e.popup.html).appendTo("body").hide()),window.inc_popup=new i(e),jQuery(document).trigger("popup-initialized",[window.inc_popup]),e.noinit||e.preview||inc_popup.init())};if(e.popup instanceof Array)for(var o=0;o<e.popup.length;o+=1){var a=jQuery.extend({},e);a.popup=e.popup[o],t(a)}else e instanceof Object&&t(e)}}var i=function(o){var i=this,a=jQuery(document),p=jQuery(window),n=null,d=null,s=null,r=null,u=null,c=null,l=null,h=null;return this.data={},this.have_popup=!1,this.ajax_data={},this.close_forever=function(){var e=i.data.expiry||365;return i.close_popup(),o.preview?!1:(i.set_cookie("po_h",1,e),!1)},this.close_popup=function(){return jQuery("html").removeClass("has-popup"),i.data.display_data.click_multi?(h.hide(),n.hide()):(h.remove(),n.remove(),i.have_popup=!1),a.trigger("popup-closed"),a.trigger("popover-closed"),i.have_popup||i.next_popup(),e(i,"closed"),!1},this.background_clicked=function(e){var t=jQuery(e.target);if(t.hasClass("wdpu-background")){if(!i.data.overlay_close)return;i.close_popup()}},this.move_popup=function(){var e,t,o,a=0,n=0;i.data.custom_size&&(i.data.height&&!isNaN(i.data.height)&&(c.data("reduce-height")&&(o=jQuery(c.data("reduce-height")),n=o.outerHeight()),t=i.data.height-n,100>t&&(t=100),c.height(t)),i.data.width&&!isNaN(i.data.width)&&(c.data("reduce-width")&&(o=jQuery(c.data("reduce-width")),a=o.outerWidth()),e=i.data.width-a,100>e&&(e=100),c.width(e)));var s=function(){if(!u.hasClass("no-move-x")){var e=p.width(),t=d.outerWidth(),o=(e-t)/2;10>o&&(o=10),u.css({left:o})}if(!u.hasClass("no-move-y")){var i=p.height(),a=d.outerHeight(),n=(i-a)/2;10>n&&(n=10),u.css({top:n})}if(l.length){var s,r,c=l.width(),h=l.height(),f=l.parent().width(),_=l.parent().height();c>f?(s=(f-c)/2,l.css({"margin-left":s})):l.css({"margin-left":0}),h>_?(r=(_-h)/2,l.css({"margin-top":r})):l.css({"margin-top":0})}};window.setTimeout(s,20)},this.reject=function(){i.have_popup=!1,i.data={}},this.maybe_show_popup=function(){if(i.fetch_dom(),n.css({opacity:0,"z-index":-1,position:"absolute",left:-1e3,width:100,right:"auto",top:-1e3,height:100,bottom:"auto"}).show(),a.trigger("popup-init",[i,i.data]),i.have_popup)switch(i.data.display){case"scroll":p.on("scroll",i.show_at_position);break;case"anchor":p.on("scroll",i.show_at_element);break;case"delay":var e=1e3*i.data.display_data.delay;"m"==i.data.display_data.delay_type&&(e*=60),window.setTimeout(function(){i.show_if_closed()},e);break;default:setTimeout(function(){"function"==typeof i.custom_handler&&i.custom_handler(i)},20)}else i.next_popup()},this.show_at_position=function(){var e,t,o=jQuery(this),n=o.scrollTop();switch(i.data.display_data.scroll_type){case"px":n>=i.data.display_data.scroll&&(p.off("scroll",i.show_at_position),i.show_if_closed());break;case"%":default:e=a.height()-p.height(),t=100*n/e,t>=i.data.display_data.scroll&&(p.off("scroll",i.show_at_position),i.show_if_closed())}},this.show_at_element=function(){var e=jQuery(i.data.display_data.anchor),t=p.scrollTop(),o=t+p.height(),a=e.offset().top,n=o-a;n>10&&(p.off("scroll",i.show_at_element),i.show_if_closed())},this.show_if_closed=function(){e(i,"open")},this.show=function(){h.on("click",i.background_clicked),a.on("popup-closed",i.reinit),p.off("resize.popup").on("resize.popup",function(){i.move_popup(i.data)}),n.show().removeAttr("style"),h.show(),i.move_popup(i.data),jQuery("html").addClass("has-popup"),r.off("click",i.close_forever).on("click",i.close_forever),i.data&&i.data.close_hide?s.off("click",i.close_forever).on("click",i.close_forever):s.off("click",i.close_popup).on("click",i.close_popup),d.hover(function(){jQuery(".claimbutton").removeClass("hide")},function(){jQuery(".claimbutton").addClass("hide")}),a.trigger("popup-displayed",[i.data,i]),a.trigger("popover-displayed",[i.data,i])},this.fetch_dom=function(){n=jQuery("#"+i.data.html_id),c=n.find(".resize"),u=n.find(".move"),d=n.find(".wdpu-msg"),s=n.find(".wdpu-close"),r=n.find(".wdpu-hide-forever"),l=n.find(".wdpu-image > img"),n.hasClass("wdpu-background")?h=n:(h=n.find(".wdpu-background"),h.length||(h=n.parents(".wdpu-background"))),u.length||(u=n),c.length||(c=n)},this.load_popup=function(e,i){(void 0!==e||1!=o.preview)&&t(o,e,i)},this.next_popup=function(){},this.init=function(){o.popup?(i.have_popup=!0,i.data=o.popup,i.exec_scripts(),i.maybe_show_popup()):(i.have_popup=!1,i.load_popup())},this.reinit=function(){"click"==i.data.display&&i.data.display_data.click_multi&&i.maybe_show_popup()},this.exec_scripts=function(){if(void 0!==i.data.script){var e=new Function("me",i.data.script);e(i)}},this.get_cookie=function(e){var t,o,a,p=document.cookie.split(";");for(a=i.data&&i.data.popup_id?e+"-"+i.data.popup_id+"=":e+"=",t=0;t<p.length;t+=1){for(o=p[t];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(a))return o.substring(a.length,o.length)}return null},this.set_cookie=function(e,t,a){var p,n,d;o.preview||(isNaN(a)?n="":(p=new Date,p.setTime(p.getTime()+24*a*60*60*1e3),n="; expires="+p.toGMTString()),d=i.data&&i.data.popup_id?e+"-"+i.data.popup_id:e,document.cookie=d+"="+t+n+"; path=/")},{init:i.init,load:i.load_popup,extend:i}},a="closed",p=[];jQuery(function(){o(_popup_data)})}();