!function(){var o=function(o){var e=this,t=jQuery(document),p=jQuery(window),i=jQuery("#darkbackground"),n=null,a=null,u=null,r=null,d=null;return this.data={},this.have_popup=!1,this.close_forever=function(){var t=e.data.expiry||365;return e.close_popup(),o.preview?!1:(e.set_cookie("po_h-",1,t),!1)},this.close_popup=function(){return e.data.multi_open?(i.hide(),n.hide()):(i.remove(),n.remove(),e.have_popup=!1),t.trigger("popup-closed"),t.trigger("popover-closed"),e.have_popup||e.next_popup(),!1},this.move_popup=function(){e.data.custom_size&&d.width(e.data.width).height(e.data.height),d.hasClass("no-move")||window.setTimeout(function(){d.css({top:(p.height()-a.height())/2,left:(p.width()-a.width())/2})},20)},this.reject=function(){e.have_popup=!1,e.data={}},this.maybe_show_popup=function(){e.fetch_dom(),t.trigger("popup-init",[e,e.data]),t.trigger("popover-init",[e,e.data]),e.have_popup?setTimeout(function(){return n.hide(),e.data.wait_for_event?!1:(window.setTimeout(function(){e.show(),e.data.multi_open&&t.on("popup-closed",e.reinit)},e.data.delay),void 0)},500):e.next_popup()},this.show=function(){e.move_popup(e.data),p.off("resize.popup").on("resize.popup",function(){e.move_popup(e.data)}),n.show(),i.show(),r.off("click",e.close_forever).on("click",e.close_forever),e.data&&e.data.close_hide?u.off("click",e.close_forever).on("click",e.close_forever):u.off("click",e.close_popup).on("click",e.close_popup),a.hover(function(){jQuery(".claimbutton").removeClass("hide")},function(){jQuery(".claimbutton").addClass("hide")}),t.trigger("popup-displayed",[e.data,e]),t.trigger("popover-displayed",[e.data,e])},this.fetch_dom=function(){n=jQuery("#"+e.data.html_id),d=n.find(".resize"),a=n.find(".wdpu-msg"),u=n.find(".wdpu-close"),r=n.find(".wdpu-hide-forever"),d.length||(d=n)},this.prepare_dom=function(){return""===e.data.html?!1:(jQuery('<style type="text/css">'+e.data.styles+"</style>").appendTo("head"),jQuery(e.data.html).appendTo("body"),e.fetch_dom(),n.hide(),i.hide(),e.maybe_show_popup(),void 0)},this.load_popup=function(p,i){var n,a,u=0,r=window.location,d=document.referrer;e.have_popup=!1;var c=function(o){e.data=o,o&&(e.have_popup=!0,e.prepare_dom())};return"undefined"!=typeof force_popover&&(u=force_popover.toString()),"undefined"!=typeof p&&(u=p.toString()),a={action:"inc_popup","do":o["do"],thefrom:r.toString(),thereferrer:d.toString()},u&&(a.po_id=u),i&&(a.data=i),o.preview&&(a.preview=!0),n={url:o.ajaxurl,dataType:"jsonp",jsonpCallback:"po_data",data:a,success:function(o){c(o)},complete:function(){t.trigger("popup-load-done",[e.data,e])}},jQuery.ajax(n)},this.next_popup=function(){console.log("try to fetch next popup...")},this.init=function(){o.popup?(e.have_popup=!0,e.data=o.popup,e.maybe_show_popup()):(e.have_popup=!1,e.load_popup())},this.reinit=function(){e.maybe_show_popup()},this.get_cookie=function(o){var t,p,i,n=document.cookie.split(";");for(i=e.data&&e.data.popup_id?o+"-"+e.data.popup_id+"=":o+"=",t=0;t<n.length;t+=1){for(p=n[t];" "===p.charAt(0);)p=p.substring(1,p.length);if(0===p.indexOf(i))return p.substring(i.length,p.length)}return null},this.set_cookie=function(t,p,i){var n,a,u;o.preview||(isNaN(i)?a="":(n=new Date,n.setTime(n.getTime()+24*i*60*60*1e3),a="; expires="+n.toGMTString()),u=e.data&&e.data.popup_id?t+"-"+e.data.popup_id:t,document.cookie=u+"="+p+a+"; path=/")},{init:this.init,load:this.load_popup}};jQuery(function(){window.inc_popup=new o(_popup_data),_popup_data.noinit||_popup_data.preview||inc_popup.init()})}();