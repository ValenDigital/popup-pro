!function(){var o=function(o){var e=this,t=jQuery(document),p=jQuery(window),i=jQuery("#darkbackground"),a=null,n=null,u=null,r=null;return this.data={},this.have_popup=!1,this.close_forever=function(){var t=e.data.expiry||365;return e.close_popup(),o.preview?!1:(e.set_cookie("po_h-",1,t),!1)},this.close_popup=function(){return e.data.multi_open?(i.hide(),a.hide()):(i.remove(),a.remove(),e.have_popup=!1),t.trigger("popup-closed"),t.trigger("popover-closed"),e.have_popup||e.next_popup(),!1},this.move_popup=function(){e.data.custom_size&&a.width(e.data.width).height(e.data.height),a.is(":visible")||(a.css({top:p.height()}),a.show()),window.setTimeout(function(){a.css({top:(p.height()-n.height())/2,left:(p.width()-n.width())/2})},20)},this.reject=function(){e.have_popup=!1,e.data={}},this.maybe_show_popup=function(){e.fetch_dom(),t.trigger("popup-init",[e,e.data]),t.trigger("popover-init",[e,e.data]),e.have_popup?setTimeout(function(){return a.hide(),e.data.wait_for_event?!1:(window.setTimeout(function(){e.show(),e.data.multi_open&&t.on("popup-closed",e.reinit)},e.data.delay),void 0)},500):e.next_popup()},this.show=function(){e.move_popup(e.data),p.off("resize.popup").on("resize.popup",function(){e.move_popup(e.data)}),a.show(),i.show(),r.off("click",e.close_forever).on("click",e.close_forever),e.data&&e.data.close_hide?u.off("click",e.close_forever).on("click",e.close_forever):u.off("click",e.close_popup).on("click",e.close_popup),n.hover(function(){jQuery(".claimbutton").removeClass("hide")},function(){jQuery(".claimbutton").addClass("hide")}),t.trigger("popup-displayed",[e.data,e]),t.trigger("popover-displayed",[e.data,e])},this.fetch_dom=function(){a=jQuery("#"+e.data.html_id),n=a.find("#message"),u=a.find("#closebox"),r=a.find("#clearforever")},this.prepare_dom=function(){return""===e.data.html?!1:(jQuery('<style type="text/css">'+e.data.styles+"</style>").appendTo("head"),jQuery(e.data.html).appendTo("body"),e.fetch_dom(),a.hide(),i.hide(),e.maybe_show_popup(),void 0)},this.load_popup=function(p,i){var a=0,n=window.location,u=document.referrer;e.have_popup=!1;var r=function(o){e.data=o,o&&(e.have_popup=!0,e.prepare_dom())};return"undefined"!=typeof force_popover&&(a=force_popover.toString()),"undefined"!=typeof p&&(a=p.toString()),jQuery.ajax({url:o.ajaxurl,dataType:"jsonp",jsonpCallback:"po_data",data:{action:"inc_popup","do":o["do"],thefrom:n.toString(),thereferrer:u.toString(),po_id:a,data:i||{}},success:function(o){r(o)},complete:function(){t.trigger("popup-load-done",[e.data,e])}})},this.next_popup=function(){console.log("try to fetch next popup...")},this.init=function(){o.popup?(e.have_popup=!0,e.data=o.popup,e.maybe_show_popup()):(e.have_popup=!1,e.load_popup())},this.reinit=function(){e.maybe_show_popup()},this.get_cookie=function(o){var t,p,i,a=document.cookie.split(";");for(i=e.data&&e.data.popup_id?o+"-"+e.data.popup_id+"=":o+"=",t=0;t<a.length;t+=1){for(p=a[t];" "===p.charAt(0);)p=p.substring(1,p.length);if(0===p.indexOf(i))return p.substring(i.length,p.length)}return null},this.set_cookie=function(t,p,i){var a,n,u;o.preview||(isNaN(i)?n="":(a=new Date,a.setTime(a.getTime()+24*i*60*60*1e3),n="; expires="+a.toGMTString()),u=e.data&&e.data.popup_id?t+"-"+e.data.popup_id:t,document.cookie=u+"="+p+n+"; path=/")},{init:this.init,load:this.load_popup}};jQuery(function(){window.inc_popup=new o(_popup_data),_popup_data.noinit||_popup_data.preview||inc_popup.init()})}();
//# sourceMappingURL=public.min.js.map