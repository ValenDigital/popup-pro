/*! PopUp Pro - v4.7.11
 * http://premium.wpmudev.org/project/the-pop-over-plugin/
 * Copyright (c) 2015; * Licensed GPLv2+ */
(function(){function e(e){"closed"===c?e._show()?(u=e,c="open"):t(e):h[h.length]=e}function t(){if(c="closed",u=null,h.length>0){var t=h.shift();e(t)}}function i(){return{state:c,queue:h,current:u}}function n(e,t,i){var n,r,a=0,l=o(""+window.location),c=o(""+document.referrer),h=null,u=function u(t){h=jQuery.extend({},e),h.popup=t,s(h)};return void 0!==window.force_popover&&(a=""+window.force_popover),void 0!==t&&(a=""+t),e.ajax_data=e.ajax_data||{},r=jQuery.extend({},e.ajax_data),r.action="inc_popup",r["do"]=e["do"],r.thefrom=l,r.thereferrer=c,a&&(r.po_id=a),i&&(r.data=i),e.preview&&(r.preview=!0),n={url:e.ajaxurl,dataType:"jsonp",jsonpCallback:"po_data",data:r,success:function(e){u(e)},complete:function(){jQuery(document).trigger("popup-load-done",[h])}},jQuery.ajax(n)}function s(e){if(void 0!==e){var t=function t(e){void 0!==e&&(void 0!==e.popup&&void 0!==e.popup.html&&(jQuery('<style type="text/css">'+e.popup.styles+"</style>").appendTo("head"),jQuery(e.popup.html).appendTo("body").hide()),window.inc_popup=new l(e),window.inc_popups[window.inc_popups.length]=window.inc_popup,jQuery(document).trigger("popup-initialized",[window.inc_popup]),e.noinit||e.preview||window.inc_popup.init())};if(e.popup instanceof Array)for(var i=0;e.popup.length>i;i+=1){var n=jQuery.extend({},e);n.popup=e.popup[i],t(n)}else e instanceof Object&&t(e)}}function o(e){for(var t=[],i=0;e.length>i;i++){if(e.length>i+1){var n=e.charCodeAt(i),s=e.charCodeAt(i+1);if(n>=55296&&56319>=n&&56320===(64512&s)||s>=768&&879>=s){t.unshift(e.substring(i,i+2)),i++;continue}}t.unshift(e[i])}return t.join("")}var r=[],a=!1,l=function(s){var o=this;o.data={},o.have_popup=!1,o.ajax_data={},o.opened=0,o.elements={doc:jQuery(document),win:jQuery(window),div:null,msg:null,close:null,hide:null,move:null,resize:null,img:null,back:null},o.close_forever=function(){var e=o.data.expiry||365;return o.close_popup(),s.preview?!1:(o.set_cookie("po_h",1,e),!1)},o.close_popup=function(){function e(){o.data.display_data.click_multi?(o.elements.back.hide(),o.elements.div.hide()):(o.elements.back.remove(),o.elements.div.remove(),o.have_popup=!1),o.elements.doc.trigger("popup-closed",[o,o.data]),o.elements.doc.trigger("popover-closed",[o,o.data])}return jQuery("html").removeClass("has-popup can-scroll no-scroll"),o.data.animation_out?(o.elements.msg.addClass(o.data.animation_out+" animated"),o.elements.msg.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){o.elements.msg.removeClass("animated"),o.elements.msg.removeClass(o.data.animation_out),e()})):e(),t(o),!1},o.background_clicked=function(e){var t=jQuery(e.target);if(t.hasClass("wdpu-background")){if(!o.data.overlay_close)return;o.data.close_hide?o.close_forever():o.close_popup()}},o.move_popup=function(){var e,t,i,n=0,s=0;o.data.custom_size&&(o.data.height&&!isNaN(o.data.height)&&(o.elements.resize.data("reduce-height")&&(i=jQuery(o.elements.resize.data("reduce-height")),s=i.outerHeight()),t=o.data.height-s,100>t&&(t=100),o.elements.resize.height(t)),o.data.width&&!isNaN(o.data.width)&&(o.elements.resize.data("reduce-width")&&(i=jQuery(o.elements.resize.data("reduce-width")),n=i.outerWidth()),e=o.data.width-n,100>e&&(e=100),o.elements.resize.width(e)));var r=function r(){if(!o.elements.move.hasClass("no-move-x")){var e=o.elements.win.width(),t=o.elements.msg.outerWidth(),i=(e-t)/2;10>i&&(i=10),o.elements.move.css({left:i})}if(!o.elements.move.hasClass("no-move-y")){var n=o.elements.win.height(),s=o.elements.msg.outerHeight(),r=(n-s)/2;10>r&&(r=10),o.elements.move.css({top:r})}if(o.elements.img.length){var a,l,c=o.elements.img.width(),h=o.elements.img.height(),u=o.elements.img.parent().width(),d=o.elements.img.parent().height();c>u?(a=(u-c)/2,o.elements.img.css({"margin-left":a})):o.elements.img.css({"margin-left":0}),h>d?(l=(d-h)/2,o.elements.img.css({"margin-top":l})):o.elements.img.css({"margin-top":0})}};window.setTimeout(r,20),r()},o.reject=function(){o.have_popup=!1,o.data={}},o.prepare=function(){if(o.fetch_dom(),o.elements.div.css({opacity:0,"z-index":-1,position:"fixed",left:-1e3,width:100,right:"auto",top:-1e3,height:100,bottom:"auto"}).show(),o.elements.doc.trigger("popup-init",[o,o.data]),o.have_popup)switch(o.data.display){case"scroll":o.elements.win.on("scroll",o.show_at_position);break;case"anchor":o.elements.win.on("scroll",o.show_at_element);break;case"delay":var t=1e3*o.data.display_data.delay;"m"===o.data.display_data.delay_type&&(t*=60),window.setTimeout(function(){e(o)},t);break;default:window.setTimeout(function(){"function"==typeof o.custom_handler&&o.custom_handler(o)},20)}},o.show_at_position=function(){var t,i,n=jQuery(this),s=n.scrollTop();"px"===o.data.display_data.scroll_type?s>=o.data.display_data.scroll&&(o.elements.win.off("scroll",o.show_at_position),e(o)):(t=o.elements.doc.height()-o.elements.win.height(),i=100*s/t,i>=o.data.display_data.scroll&&(o.elements.win.off("scroll",o.show_at_position),e(o)))},o.show_at_element=function(){var t=jQuery(o.data.display_data.anchor),i=o.elements.win.scrollTop(),n=i+o.elements.win.height(),s=t.offset().top,r=n-s;r>10&&(o.elements.win.off("scroll",o.show_at_element),e(o))},o.show_popup=function(){return e(o),!1},o._show=function(){var e;return o.elements.div.length?(e=parseInt(o.get_cookie("po_c"),10),isNaN(e)&&(e=0),o.set_cookie("po_c",e+1,365),o.opened+=1,o.elements.back.on("click",o.background_clicked),o.elements.win.off("resize.popup").on("resize.popup",function(){o.move_popup(o.data)}),o.elements.div.removeAttr("style").show(),o.elements.back.show(),o.data.scroll_body?jQuery("html").addClass("has-popup can-scroll"):jQuery("html").addClass("has-popup no-scroll"),o.elements.msg.hide(),window.setTimeout(function(){o.elements.msg.show()},2),o.move_popup(o.data),o.setup_popup(),o.prepare_animation(),o.data.animation_in&&(o.elements.msg.addClass(o.data.animation_in+" animated"),o.elements.msg.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){o.elements.msg.removeClass("animated"),o.elements.msg.removeClass(o.data.animation_in)})),!0):!1},o.prepare_animation=function(){var e=!1,t="Webkit Moz O ms Khtml".split(" ");if(void 0!==o.elements.msg[0].style.animationName&&(e=!0),e===!1)for(var i=0;t.length>i;i++)if(void 0!==o.elements.msg[0].style[t[i]+"AnimationName"]){e=!0;break}e||(o.data.animation_in="",o.data.animation_out="")},o.setup_popup=function(){o.elements.hide.off("click",o.close_forever).on("click",o.close_forever),o.data&&o.data.close_hide?(o.elements.close.off("click",o.close_forever).on("click",o.close_forever),o.elements.msg.off("click",".close",o.close_forever).on("click",".close",o.close_forever)):(o.elements.close.off("click",o.close_popup).on("click",o.close_popup),o.elements.msg.off("click",".close",o.close_popup).on("click",".close",o.close_popup)),o.elements.msg.hover(function(){jQuery(".claimbutton").removeClass("hide")},function(){jQuery(".claimbutton").addClass("hide")}),o.elements.doc.trigger("popup-displayed",[o.data,o]),o.elements.doc.trigger("popover-displayed",[o.data,o]),o.elements.div.off("submit","form",o.form_submit).on("submit","form",o.form_submit),o.elements.msg.off("click",".wdpu-cta",o.cta_click).on("click",".wdpu-cta",o.cta_click)},o.fetch_dom=function(){o.elements.div=jQuery("#"+o.data.html_id),o.elements.div.length||o.reject(),o.elements.resize=o.elements.div.find(".resize"),o.elements.move=o.elements.div.find(".move"),o.elements.msg=o.elements.div.find(".wdpu-msg"),o.elements.close=o.elements.div.find(".wdpu-close"),o.elements.hide=o.elements.div.find(".wdpu-hide-forever"),o.elements.img=o.elements.div.find(".wdpu-image > img"),o.elements.div.hasClass("wdpu-background")?o.elements.back=o.elements.div:(o.elements.back=o.elements.div.find(".wdpu-background"),o.elements.back.length||(o.elements.back=o.elements.div.parents(".wdpu-background"))),o.elements.move.length||(o.elements.move=o.elements.div),o.elements.resize.length||(o.elements.resize=o.elements.div)},o.load_popup=function(e,t){void 0===e&&s.preview||(o.have_popup=!1,n(s,e,t))},o.cta_click=function(){return!0},o.form_submit=function(){function e(){var e=!1;"complete"!==l[0].contentDocument.readyState||a?(c+=1,c>200&&(o.elements.doc.trigger("popup-submit-timeout",[o,o.data]),e=!0)):e=!0,e&&(window.clearInterval(s),n())}function t(e){return void 0!==e&&(o.data.close_popup=e),r?(o.data.ajax_history=r,r.length&&(o.data.last_ajax=r[0])):(o.data.ajax_history=[],o.data.last_ajax={}),o.elements.doc.trigger("popup-submit-done",[o,o.data]),o.data.close_popup?(o.close_popup(),!0):!1}function i(e,i,n){var s=e,r=u.find(".wdpu-msg-inner"),a=u.find(".wdpu-title"),l=u.find(".wdpu-subtitle");s instanceof jQuery||(s=jQuery("<div></div>").html(e)),s instanceof jQuery&&(s.hasClass("wdpu-msg-inner")?r.replaceWith(s):r.find(".wdpu-content").empty().append(s)),void 0!==i&&a.html(i),void 0!==n&&l.html(n),o.move_popup(),o.setup_popup(),t(),o.fetch_dom(),o.setup_popup(),o.elements.doc.trigger("popup-init",[o,o.data])}function n(){var e,n,s,r,a;if(o.elements.doc.trigger("popup-submit-process",[l,o,o.data]),!o.data.form_submit)return!1;a="ignore"===o.data.form_submit?!1:!0;try{s=jQuery(f,l[0].contentDocument),r=o.data.did_ajax}catch(c){s=jQuery("<html></html>"),r=!0}o.data.close_popup=!1,d.removeClass("wdpu-loading"),e=s.find(".wdpu-msg-inner"),n=u.find(".wdpu-msg-inner"),jQuery("#wdpu-frame").remove(),o.data.last_ajax=void 0,"close"===o.data.form_submit?t(!0):o.data.new_content?i(o.data.new_content,o.data.new_title,o.data.new_subtitle):r?t(a):s.length&&s.html().length?n.length&&e.length&&e.text().length?i(e):t(a):t(!0)}var s,l,c,h=jQuery(this),u=h.parents(".wdpu-container").first(),d=u.find(".wdpu-msg"),g=jQuery('<input type="hidden" name="_po_method_" />'),f=".wdpu-"+o.data.popup_id;return u.length?("redirect"!==o.data.form_submit&&(l=jQuery('<iframe id="wdpu-frame" name="wdpu-frame"></iframe>').hide().appendTo("body"),h.attr("target","wdpu-frame"),g.appendTo(h).val("raw")),d.addClass("wdpu-loading"),"redirect"===o.data.form_submit?window.setTimeout(function(){o.close_popup()},10):a?(o.data.did_ajax=!0,c=0,s=window.setInterval(e,50)):(o.data.did_ajax=!1,l.load(n)),!0):!0},o.init=function(){s.popup?(o.have_popup=!0,o.data=s.popup,o.exec_scripts(),o.prepare()):o.load_popup()},o.exec_scripts=function(){var e;void 0!==o.data.script&&(e=Function("me",o.data.script),e(o))},o.close=function(){return o.close_popup()},o.open=function(){return o.show_popup()},o.status=function(){return i()},o.get_cookie=function(e){var t,i,n,s=document.cookie.split(";");for(n=o.data&&o.data.popup_id?e+"-"+o.data.popup_id+"=":e+"=",t=0;s.length>t;t+=1){for(i=s[t];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n))return i.substring(n.length,i.length)}return null},o.set_cookie=function(e,t,i){var n,r,a;s.preview||(isNaN(i)?r="":(n=new Date,n.setTime(n.getTime()+1e3*60*60*24*i),r="; expires="+n.toGMTString()),a=o.data&&o.data.popup_id?e+"-"+o.data.popup_id:e,document.cookie=a+"="+t+r+"; path=/")};var l={init:o.init,load:o.load_popup,extend:o};return s.dynamic&&(o.init(),l.open=o.show_popup,l.close=o.close_popup,l.status=i,delete l.load),l},c="closed",h=[],u=null;jQuery(document).ajaxStart(function(){a=!0}),jQuery(document).ajaxComplete(function(e,t){a=!1,r.unshift(t)}),jQuery(function(){window.inc_popups=[],window._popup_data&&s(window._popup_data)}),window.wdev_popup=function(e){var t=null,i={preview:!1,dynamic:!0,ajaxurl:"","do":"get_data",ajax_data:{},popup:e};return jQuery('<style type="text/css">'+e.styles+"</style>").appendTo("head"),jQuery(e.html).appendTo("body").hide(),i.popup.display_data.click_multi=!0,t=new l(i)}})();